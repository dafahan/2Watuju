<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<!-- Favicon Meta -->
		<link rel="apple-touch-icon" sizes="180x180" href="%sveltekit.assets%/favicon/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="%sveltekit.assets%/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="%sveltekit.assets%/favicon/favicon-16x16.png">
		<link rel="manifest" href="%sveltekit.assets%/favicon/site.webmanifest">
		<link rel="shortcut icon" href="%sveltekit.assets%/favicon/favicon.ico" type="image/x-icon">
		<meta name="theme-color" content="#ffffff">

		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<!-- Critical Resource Hints - Order matters! -->
		<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="preconnect" href="https://pub-da54bf79f89f4f2980788c758f380531.r2.dev" crossorigin>
		<link rel="dns-prefetch" href="//pub-da54bf79f89f4f2980788c758f380531.r2.dev">
		<!-- Add to your app.html head section -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r160/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r160/GLTFLoader.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r160/OrbitControls.js"></script>
		
		<!-- Critical CSS Inline - Prevents render blocking -->
		<style>
			/* Critical font fallbacks to prevent FOIT */
			.font-roboto-condensed {
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI Condensed', 'Arial Narrow', sans-serif;
				font-display: swap;
			}
			
			.font-roboto {
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
				font-display: swap;
			}
			
			.font-roboto-mono {
				font-family: 'SF Mono', Monaco, 'Cascadia Code', Consolas, 'Courier New', monospace;
				font-display: swap;
			}
			
			.font-chivo-mono {
				font-family: 'SF Mono', Monaco, 'Cascadia Code', Consolas, 'Courier New', monospace;
				font-display: swap;
			}
			
			/* Critical layout styles */
			html {
				scroll-behavior: smooth;
			}
			body {
				margin: 0;
				padding: 0;
				font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
				-webkit-font-smoothing: antialiased;
				-moz-osx-font-smoothing: grayscale;
				text-rendering: optimizeLegibility;
			}
			
			/* Prevent layout shifts */
			img {
				max-width: 100%;
				height: auto;
			}
			
			/* Loading state for images */
			.img-loading {
				background-color: #f3f4f6;
				background-image: 
					linear-gradient(45deg, transparent 49%, rgba(255,255,255,0.6) 50%, transparent 51%),
					linear-gradient(-45deg, transparent 49%, rgba(255,255,255,0.6) 50%, transparent 51%);
				background-size: 20px 20px;
				animation: loading-shimmer 1.5s infinite;
			}
			
			@keyframes loading-shimmer {
				0% { background-position: 0 0, 0 0; }
				100% { background-position: 40px 40px, -40px -40px; }
			}
			
			/* Hero section critical styles */
			.hero-section {
				background-color: #56AAB7;
				min-height: 50vh;
			}
			
			/* Header critical styles */
			.main-header {
				min-height: 4rem;
				background-color: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(12px);
			}
			
			@media (min-width: 1024px) {
				.main-header {
					min-height: 5rem;
				}
			}
			
			/* Font loading optimization - will be overridden when fonts load */
			.fonts-loading .font-roboto-condensed {
				font-family: -apple-system, BlinkMacSystemFont, sans-serif;
			}
			
			.fonts-loaded .font-roboto-condensed {
				font-family: 'Roboto Condensed', -apple-system, BlinkMacSystemFont, sans-serif;
			}
			
			.fonts-loaded .font-roboto {
				font-family: 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
			}
		</style>
		
		<!-- Load fonts with optimized strategy - async to prevent render blocking -->
		<link href="https://fonts.googleapis.com/css2?family=Chivo+Mono:wght@100..900&family=Roboto:wght@100..900&family=Roboto+Condensed:wght@100..900&family=Roboto+Mono:wght@100..900&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
		<noscript>
			<link href="https://fonts.googleapis.com/css2?family=Chivo+Mono:wght@100..900&family=Roboto:wght@100..900&family=Roboto+Condensed:wght@100..900&family=Roboto+Mono:wght@100..900&display=swap" rel="stylesheet">
		</noscript>

		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover" class="fonts-loading">
		<div style="display: contents">%sveltekit.body%</div>
		
		<!-- Font loading optimization script -->
		<script>
			// Remove any outdated font preloads to prevent 404s
			document.addEventListener('DOMContentLoaded', function() {
				// Mark body as fonts loading
				document.body.classList.add('fonts-loading');
				
				// Optimize font loading
				if ('fonts' in document) {
					// Wait for fonts to load, then update classes
					document.fonts.ready.then(() => {
						document.body.classList.remove('fonts-loading');
						document.body.classList.add('fonts-loaded');
						console.log('🎨 Fonts loaded successfully');
					}).catch(() => {
						// Fallback if font loading fails
						document.body.classList.remove('fonts-loading');
						console.log('⚠️ Font loading failed, using fallbacks');
					});
					
					// Timeout fallback - don't wait too long for fonts
					setTimeout(() => {
						if (!document.body.classList.contains('fonts-loaded')) {
							document.body.classList.remove('fonts-loading');
							document.body.classList.add('fonts-loaded');
							console.log('⏰ Font loading timeout, switching to fallbacks');
						}
					}, 3000);
				} else {
					// Browser doesn't support Font Loading API
					setTimeout(() => {
						document.body.classList.remove('fonts-loading');
						document.body.classList.add('fonts-loaded');
					}, 100);
				}
			});
			
			// Preload critical images without blocking render
			const criticalImages = [
				'https://pub-da54bf79f89f4f2980788c758f380531.r2.dev/hero.webp',
				'https://pub-da54bf79f89f4f2980788c758f380531.r2.dev/logo.webp',
				'https://pub-da54bf79f89f4f2980788c758f380531.r2.dev/blur-hero.png'
			];
			
			// Use requestIdleCallback if available, otherwise setTimeout
			const schedulePreload = window.requestIdleCallback || ((cb) => setTimeout(cb, 1));
			
			schedulePreload(() => {
				criticalImages.forEach(src => {
					const img = new Image();
					img.src = src;
				});
			});
		</script>
	</body>
</html>